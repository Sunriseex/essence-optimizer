# Essence Farm Optimizer

Веб-инструмент для подбора лучших локаций фарма эссенций оружия в **Arknights: Endfield** по выбранному набору оружия и статов.

## Что умеет

- Работает полностью локально (HTML + CSS + JS + JSON).
- Показывает оружие по редкости (6/5/4★) с возможностью сворачивать секции.
- Поддерживает два состояния оружия:
  - `левый клик` — оружие нужно фармить (синий);
  - `правый клик` — эссенция уже готова (зелёный, не участвует в фарме).
- Автоматически подбирает статы на основе текущего выбранного оружия.
- Считает план фарма по группам оружия:
  - для каждой группы подбирает свой набор `Attribute Stats`;
  - показывает ключевую локацию, покрытие оружия и покрытие статов.
- Есть анимации интерфейса: плавное раскрытие списков, заливка карточки оружия от места клика, индикатор загрузки на кнопке расчёта.

## Структура проекта

- `Essence Farm Optimizer.html` — основной HTML-шаблон.
- `styles.css` — стили и анимации интерфейса.
- `app.js` — вся логика приложения.
- `weapons.json` — база оружия.
- `locations.json` — база локаций и возможных статов дропа.
- `weapons/` — иконки оружия.

## Быстрый запуск

Приложение использует `fetch()` для JSON, поэтому его нужно открывать через локальный сервер, а не через `file://`.

### Вариант 1: Python

```bash
python -m http.server 4173
```

Открыть в браузере:

`http://127.0.0.1:4173/Essence%20Farm%20Optimizer.html`

### Вариант 2: Node.js (если установлен `http-server`)

```bash
npx http-server -p 4173
```

## Как пользоваться

1. Выберите оружие в блоке `Оружие`.
2. Уточните/оставьте автоподбор статов в блоке `Желаемые статы`:
   - ровно 3 `Attribute Stats`;
   - ровно 1 стат из `Secondary` или `Skill`.
3. Нажмите `Найти лучшую локацию`.
4. Изучите результат по группам:
   - список оружия группы;
   - ключевая локация;
   - процент покрытия оружия;
   - совпадение статов.

## Формат данных

### `weapons.json`

Объект вида:

```json
{
  "Weapon Name": {
    "rarity": 6,
    "attribute_stats": "Intellect Boost",
    "secondary_stats": "Critical Rate Boost",
    "skill_stats": "Fracture"
  }
}
```

### `locations.json`

Объект вида:

```json
{
  "Location Name": {
    "attribute_stats": ["Agility Boost", "Strength Boost", "Will Boost", "Intellect Boost", "Main Attribute Boost"],
    "secondary_stats": ["ATK Boost", "HP Boost"],
    "skill_stats": ["Infliction", "Suppression"]
  }
}
```

## Кастомизация

- Для изменения данных редактируйте `weapons.json` и `locations.json`.
- Для изменения внешнего вида и анимаций — `styles.css`.
- Для изменения логики подбора, группировки и UI-обработчиков — `app.js`.

## Примечания

- Имена иконок формируются автоматически из названия оружия (в `app.js`), для отдельных кейсов есть ручные переопределения.
- Если JSON не загружается, проверьте:
  - что сервер запущен;
  - что `weapons.json` и `locations.json` валидны;
  - что URL открыт через `http://127.0.0.1:4173/...`.

