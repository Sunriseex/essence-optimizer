<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Essence Farm Optimizer - Arknights Endfield</title>
    <link rel="icon" href="assets/icons/favicon.png" type="image/png">
    <link rel="stylesheet" href="src/css/styles.css">
</head>
<body>
    <div class="container">
        <div class="app-header">
            <h1 id="appTitle">Essence Farm Optimizer</h1>
            <div class="app-quick-actions">
                <a
                    id="repoLink"
                    class="icon-link"
                    href="https://github.com/Sunriseex/essence-optimizer"
                    target="_blank"
                    rel="noopener noreferrer"
                    aria-label="Open GitHub repository"
                    title="Open GitHub repository"
                >
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12 .5C5.65.5.5 5.65.5 12c0 5.08 3.29 9.39 7.86 10.91.58.1.79-.25.79-.56 0-.28-.01-1.2-.02-2.18-3.2.7-3.88-1.36-3.88-1.36-.52-1.33-1.28-1.68-1.28-1.68-1.05-.72.08-.7.08-.7 1.16.08 1.77 1.19 1.77 1.19 1.03 1.76 2.7 1.25 3.36.95.1-.75.4-1.25.72-1.53-2.55-.29-5.23-1.28-5.23-5.68 0-1.25.45-2.28 1.18-3.08-.12-.29-.51-1.47.11-3.06 0 0 .97-.31 3.17 1.18a10.98 10.98 0 0 1 5.78 0c2.2-1.49 3.16-1.18 3.16-1.18.62 1.59.23 2.77.11 3.06.74.8 1.18 1.83 1.18 3.08 0 4.41-2.68 5.39-5.24 5.67.41.36.77 1.07.77 2.16 0 1.56-.01 2.82-.01 3.2 0 .31.21.67.8.56A11.5 11.5 0 0 0 23.5 12C23.5 5.65 18.35.5 12 .5Z"/>
                    </svg>
                </a>
                <button id="uidCopyBtn" class="uid-copy-btn" type="button" onclick="copyGameUid()">
                    UID: 6639599843
                </button>
            </div>
        </div>

        <div class="top-layout">
            <div class="section stats-panel">
                <div class="panel-top">
                    <h2 id="statsSectionTitle">Желаемые статы</h2>
                    <div class="language-switch">
                        <label for="languageSelect" id="languageLabel">Язык</label>
                        <select id="languageSelect" onchange="setLanguage(this.value)">
                            <option value="ru">Русский</option>
                            <option value="en">English</option>
                        </select>
                    </div>
                </div>
                <div class="section-subtitle" id="statsSectionSubtitle">Выберите статы для эссенции оружия, которое нужно фармить. Secondary и Skill можно выбрать одновременно вручную.</div>

                <div class="stats-selector">
                    <div class="stat-group">
                        <h3 id="attributeGroupTitle">Attribute Stats <span class="stat-limit">(максимум 3 из 5)</span></h3>
                        <div class="stat-chips" id="attributeStats"></div>
                    </div>

                    <div class="stat-group">
                        <h3 id="secondaryGroupTitle">Secondary Stats <span class="stat-limit">(выбрать 1)</span></h3>
                        <div class="stat-chips" id="secondaryStats"></div>
                    </div>

                    <div class="stat-group">
                        <h3 id="skillGroupTitle">Skill Stats <span class="stat-limit">(выбрать 1)</span></h3>
                        <div class="stat-chips" id="skillStats"></div>
                    </div>
                </div>

                <div class="stats-actions">
                    <button class="btn" id="calculateBtn" onclick="runCalculateWithLoading()" disabled>
                        Найти лучшую локацию
                    </button>
                    <button class="reset-btn panel-reset-btn" id="resetBtn" onclick="resetAll()">Сбросить всё</button>
                </div>
            </div>

            <div class="section weapons-panel">
                <h2 id="weaponsSectionTitle">Оружие</h2>
                <div class="section-subtitle" id="weaponsSectionSubtitle">
                    <strong>Левый клик:</strong> Отметить оружие, для которого нужно фармить эссенцию (синий)<br>
                    <strong>Правый клик:</strong> Отметить оружие с уже готовой эссенцией (зелёный, не будет учитываться в фарме)
                </div>
                <div class="weapon-search">
                    <label for="weaponSearchInput" id="weaponSearchLabel">Поиск оружия</label>
                    <input type="search" id="weaponSearchInput" placeholder="Введите название оружия" oninput="handleWeaponSearchInput()">
                    <div class="weapon-search-empty" id="weaponSearchNoMatches" style="display: none;"></div>
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-box owned"></div>
                        <span id="legendOwned">Есть на аккаунте</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box essence"></div>
                        <span id="legendEssence">Эссенция готова</span>
                    </div>
                </div>

                <div id="weaponList"></div>
            </div>
        </div>

        <div class="section results" id="resultsSection">
            <h2 id="resultsSectionTitle">Результаты</h2>
            <div id="resultsContainer"></div>
        </div>
    </div>
    <button class="focus-toggle" id="focusModeToggle" onclick="toggleInterfaceVisibility()">Скрыть интерфейс</button>

    <script src="src/js/app.js"></script>
</body>
</html>
